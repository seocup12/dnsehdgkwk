<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Running Feed</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Ïä§ÌÅ¨Î°§Î∞î Ïà®Í∏∞Í∏∞ */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-gray-900 flex justify-center h-screen w-full overflow-hidden">

    <!-- App Container -->
    <div class="flex flex-col h-full w-full max-w-md bg-black text-white shadow-2xl relative overflow-hidden">
        
        <!-- Header -->
        <header class="px-4 py-4 flex justify-between items-center bg-black/90 backdrop-blur-sm z-10 border-b border-gray-800 absolute top-0 w-full">
            <div id="header-title-area">
                <!-- ÎèôÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎê® (Î°úÍ≥† ÎòêÎäî Îí§Î°úÍ∞ÄÍ∏∞) -->
            </div>
            
            <div class="flex gap-4" id="header-action-area">
                <!-- ÎèôÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎê® (Î©îÏãúÏßÄ ÏïÑÏù¥ÏΩò ÎòêÎäî Í≥µÏú† Î≤ÑÌäº) -->
            </div>
        </header>

        <!-- Main Content Area -->
        <main id="main-content" class="flex-1 overflow-y-auto scrollbar-hide pt-16 pb-20">
            <!-- 1. Feed View -->
            <div id="view-feed" class="view-section">
                <div id="feed-container" class="pb-4">
                    <!-- Ìè¨Ïä§Ìä∏Îì§Ïù¥ Ïó¨Í∏∞Ïóê Î†åÎçîÎßÅ Îê©ÎãàÎã§ -->
                </div>
            </div>

            <!-- 2. Upload View -->
            <div id="view-upload" class="view-section hidden h-full p-4">
                <h2 class="text-xl font-bold mb-4 text-white">New Run</h2>
                
                <!-- Image Selector -->
                <div onclick="document.getElementById('file-input').click()" 
                     class="w-full aspect-square bg-gray-900 rounded-xl border-2 border-dashed border-gray-700 flex flex-col items-center justify-center mb-6 relative overflow-hidden group cursor-pointer hover:border-lime-400 transition-colors">
                    
                    <div id="upload-preview-container" class="hidden w-full h-full relative">
                        <img id="upload-preview-img" src="" alt="Preview" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                            <p class="font-bold">ÏÇ¨ÏßÑ Î≥ÄÍ≤Ω</p>
                        </div>
                        <!-- Overlay Preview -->
                        <div class="absolute bottom-4 left-4 z-10 pointer-events-none">
                            <p id="preview-distance" class="text-4xl font-black italic text-lime-400">0.00</p>
                            <p class="text-xs font-bold text-gray-300 uppercase">KM</p>
                        </div>
                    </div>

                    <div id="upload-placeholder" class="text-center text-gray-500">
                        <i data-lucide="camera" class="w-12 h-12 mx-auto mb-2 text-lime-400"></i>
                        <p class="text-sm font-bold">ÏÇ¨ÏßÑÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</p>
                    </div>
                    
                    <input type="file" id="file-input" class="hidden" accept="image/*" onchange="handleImageUpload(event)">
                </div>

                <!-- Run Stats Inputs -->
                <div class="grid grid-cols-3 gap-3 mb-6">
                    <div class="bg-gray-900 p-3 rounded-lg text-center">
                        <label class="text-xs text-gray-500 block mb-1">Í±∞Î¶¨ (km)</label>
                        <input type="text" id="input-distance" value="5.00" oninput="updatePreviewStats()"
                            class="w-full bg-transparent text-center font-bold text-lime-400 focus:outline-none">
                    </div>
                    <div class="bg-gray-900 p-3 rounded-lg text-center">
                        <label class="text-xs text-gray-500 block mb-1">ÏãúÍ∞Ñ</label>
                        <input type="text" id="input-time" value="30:00" 
                            class="w-full bg-transparent text-center font-bold text-white focus:outline-none">
                    </div>
                    <div class="bg-gray-900 p-3 rounded-lg text-center">
                        <label class="text-xs text-gray-500 block mb-1">ÌéòÏù¥Ïä§</label>
                        <input type="text" id="input-pace" value="6'00&quot;" 
                            class="w-full bg-transparent text-center font-bold text-white focus:outline-none">
                    </div>
                </div>

                <!-- Caption Input -->
                <div class="mb-6">
                    <textarea id="input-caption"
                        class="w-full bg-gray-900 rounded-lg p-4 text-white placeholder-gray-500 focus:outline-none resize-none h-32"
                        placeholder="Ïò§Îäò Îü¨ÎãùÏùÄ Ïñ¥Îï†ÎÇòÏöî? #Ìï¥ÏãúÌÉúÍ∑∏"></textarea>
                </div>
            </div>

            <!-- 3. Profile View -->
            <div id="view-profile" class="view-section hidden h-full flex flex-col items-center justify-center text-gray-500">
                <i data-lucide="user" class="w-16 h-16 mb-4 text-lime-400"></i>
                <p class="font-bold text-lg text-white">ÎÇ¥ ÌîÑÎ°úÌïÑ</p>
                <p class="text-sm">Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.</p>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="absolute bottom-0 w-full bg-black border-t border-gray-800 px-6 py-4 flex justify-between items-center z-20 pb-6">
            <button onclick="switchTab('feed')" id="nav-feed" class="flex flex-col items-center gap-1 text-lime-400 transition-colors">
                <i data-lucide="home" class="w-6 h-6"></i>
                <span class="text-[10px] font-bold">ÌîºÎìú</span>
            </button>
            
            <button onclick="switchTab('upload')" class="bg-lime-400 text-black p-4 rounded-full -mt-8 shadow-[0_0_15px_rgba(163,230,53,0.5)] border-4 border-black transition-transform active:scale-95">
                <i data-lucide="camera" class="w-7 h-7"></i>
            </button>

            <button onclick="switchTab('profile')" id="nav-profile" class="flex flex-col items-center gap-1 text-gray-500 transition-colors">
                <i data-lucide="user" class="w-6 h-6"></i>
                <span class="text-[10px] font-bold">ÌîÑÎ°úÌïÑ</span>
            </button>
        </nav>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- State Management ---
        let currentTab = 'feed';
        let currentUser = {
            name: 'Me',
            avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Me',
            location: 'ÌòÑÏû¨ ÏúÑÏπò'
        };

        // Ï¥àÍ∏∞ Îç∞Ïù¥ÌÑ∞ (Mock Data)
        let posts = [
            {
                id: 1,
                user: { name: 'RunningLife', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Felix', location: 'ÌïúÍ∞ïÍ≥µÏõê Î∞òÌè¨ÏßÄÍµ¨' },
                image: 'https://images.unsplash.com/photo-1552674605-469523170d9e?q=80&w=2000&auto=format&fit=crop',
                stats: { distance: '5.02', pace: '5\'30"', time: '27:45' },
                content: 'Ïò§Îäò ÎÇ†Ïî®Í∞Ä ÎÑàÎ¨¥ Ï¢ãÏïÑÏÑú 5km Í∞ÄÎ≥çÍ≤å Îü¨Îãù! üèÉ‚Äç‚ôÇÔ∏è Î∞îÎûåÎèÑ ÏÑ†ÏÑ†ÌïòÍ≥† Í∏∞Î°ùÎèÑ Ïûò ÎÇòÏôÄÏÑú Í∏∞Î∂Ñ ÏµúÍ≥†.\n#Î™®ÎãùÎü¨Îãù #ÌïúÍ∞ï #Ïò§Ïö¥ÏôÑ #ÎÇòÏù¥ÌÇ§Îü∞',
                likes: 124,
                likedByMe: true,
                comments: [
                    { id: 101, user: 'Runner_J', text: 'ÌéòÏù¥Ïä§ ÎÑàÎ¨¥ Ï¢ãÏúºÏãúÎÑ§Ïöî! Î∂ÄÎüΩÏäµÎãàÎã§ üî•' },
                    { id: 102, user: 'HealthBoy', text: 'Ï†ÄÎèÑ Ïò§Îäò Îõ∞Îü¨ Í∞ÄÏïºÍ≤†Ïñ¥Ïöî „Öé„Öé' }
                ],
                timestamp: '2ÏãúÍ∞Ñ Ï†Ñ'
            },
            {
                id: 2,
                user: { name: 'Sarah_Run', avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah', location: 'ÏÑúÏö∏Ïà≤' },
                image: 'https://images.unsplash.com/photo-1452626038306-3a0145340cb6?q=80&w=2000&auto=format&fit=crop',
                stats: { distance: '10.5', pace: '6\'15"', time: '1:05:22' },
                content: 'Ï£ºÎßê LSD ÌõàÎ†® ÏôÑÎ£å. ÌûòÎì§ÏóàÏßÄÎßå ÏôÑÏ£ºÌï¥ÏÑú ÎøåÎìØÌïòÎã§. Îã§ÏùåÏóî ÌïòÌîÑ ÎèÑÏ†Ñ!\n#LSD #ÎßàÎùºÌÜ§Ï§ÄÎπÑ #Îü∞Î¶∞Ïù¥',
                likes: 89,
                likedByMe: false,
                comments: [],
                timestamp: '5ÏãúÍ∞Ñ Ï†Ñ'
            }
        ];

        let uploadData = {
            image: null,
            text: ''
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderHeader();
            renderFeed();
            lucide.createIcons();
        });

        // --- Core Functions ---

        function switchTab(tab) {
            currentTab = tab;
            
            // Hide all views
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            // Show active view
            document.getElementById(`view-${tab}`).classList.remove('hidden');

            // Update Nav Styles
            const navFeed = document.getElementById('nav-feed');
            const navProfile = document.getElementById('nav-profile');
            
            if(tab === 'feed') {
                navFeed.className = "flex flex-col items-center gap-1 text-lime-400 transition-colors";
                navProfile.className = "flex flex-col items-center gap-1 text-gray-500 transition-colors";
            } else if (tab === 'profile') {
                navFeed.className = "flex flex-col items-center gap-1 text-gray-500 transition-colors";
                navProfile.className = "flex flex-col items-center gap-1 text-lime-400 transition-colors";
            } else {
                navFeed.className = "flex flex-col items-center gap-1 text-gray-500 transition-colors";
                navProfile.className = "flex flex-col items-center gap-1 text-gray-500 transition-colors";
            }

            renderHeader();
            lucide.createIcons();
        }

        function renderHeader() {
            const titleArea = document.getElementById('header-title-area');
            const actionArea = document.getElementById('header-action-area');

            if (currentTab === 'upload') {
                titleArea.innerHTML = `
                    <button onclick="switchTab('feed')" class="text-white">
                        <i data-lucide="chevron-left" class="w-7 h-7"></i>
                    </button>
                `;
                const canShare = uploadData.image !== null;
                actionArea.innerHTML = `
                    <button 
                        onclick="handlePostSubmit()"
                        class="font-bold px-4 py-1 rounded-full text-sm transition-colors ${canShare ? 'bg-lime-400 text-black' : 'bg-gray-800 text-gray-500'}"
                        ${!canShare ? 'disabled' : ''}
                    >
                        Í≥µÏú†ÌïòÍ∏∞
                    </button>
                `;
            } else {
                titleArea.innerHTML = `
                    <h1 class="text-2xl font-black italic tracking-tighter text-white">
                        RUN<span class="text-lime-400">FEED</span>
                    </h1>
                `;
                actionArea.innerHTML = `
                    <button class="relative">
                        <i data-lucide="message-circle" class="w-6 h-6"></i>
                        <span class="absolute -top-1 -right-1 w-2 h-2 bg-lime-400 rounded-full"></span>
                    </button>
                `;
            }
            lucide.createIcons();
        }

        function formatContent(text) {
            return text.split(/(\s+)/).map(part => {
                if (part.startsWith('#')) {
                    return `<span class="text-lime-400 font-semibold">${part}</span>`;
                }
                return part;
            }).join('');
        }

        function renderFeed() {
            const container = document.getElementById('feed-container');
            container.innerHTML = posts.map(post => {
                const commentHtml = post.comments.slice(0, 2).map(c => `
                    <div class="text-xs text-gray-300 mb-1">
                        <span class="font-bold mr-2">${c.user}</span>${c.text}
                    </div>
                `).join('');

                const commentsSection = post.comments.length > 0 ? `
                    <div class="mb-3">
                        <p class="text-xs text-gray-500 mb-1 cursor-pointer">ÎåìÍ∏Ä ${post.comments.length}Í∞ú Î™®Îëê Î≥¥Í∏∞</p>
                        ${commentHtml}
                    </div>
                ` : '';

                return `
                <article class="mb-8 border-b border-gray-900 pb-4">
                    <!-- User Info -->
                    <div class="flex justify-between items-center px-4 py-3">
                        <div class="flex items-center gap-3">
                            <img src="${post.user.avatar}" class="w-10 h-10 rounded-full border border-gray-700 bg-gray-800">
                            <div>
                                <p class="font-bold text-sm">${post.user.name}</p>
                                <p class="text-xs text-gray-400 flex items-center gap-1">
                                    <i data-lucide="map-pin" class="w-3 h-3"></i> ${post.user.location}
                                </p>
                            </div>
                        </div>
                        <button class="text-gray-400"><i data-lucide="more-horizontal" class="w-5 h-5"></i></button>
                    </div>

                    <!-- Image & Stats -->
                    <div class="relative w-full aspect-[4/5] bg-gray-900 overflow-hidden">
                        <img src="${post.image}" class="w-full h-full object-cover">
                        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent via-transparent to-black/80 flex flex-col justify-end p-6">
                            <div class="flex justify-between items-end mb-2">
                                <div>
                                    <p class="text-6xl font-black italic tracking-tighter text-lime-400 leading-none drop-shadow-lg">
                                        ${post.stats.distance}
                                    </p>
                                    <p class="text-sm font-bold text-gray-300 uppercase tracking-widest ml-1">Kilometers</p>
                                </div>
                                <div class="text-right">
                                    <div class="flex flex-col items-end mb-2">
                                        <i data-lucide="zap" class="w-5 h-5 text-lime-400 mb-1"></i>
                                        <span class="text-2xl font-bold italic">${post.stats.pace}</span>
                                        <span class="text-[10px] text-gray-400 uppercase">Avg Pace</span>
                                    </div>
                                    <div class="flex flex-col items-end">
                                        <i data-lucide="clock" class="w-5 h-5 text-lime-400 mb-1"></i>
                                        <span class="text-2xl font-bold italic">${post.stats.time}</span>
                                        <span class="text-[10px] text-gray-400 uppercase">Time</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="px-4 py-3 flex justify-between items-center">
                        <div class="flex gap-5">
                            <button onclick="handleLike(${post.id})" class="transition-transform active:scale-90">
                                <i data-lucide="heart" class="w-7 h-7 ${post.likedByMe ? 'fill-red-500 text-red-500' : 'text-white'}"></i>
                            </button>
                            <button class="transition-transform active:scale-90">
                                <i data-lucide="message-circle" class="w-7 h-7 text-white"></i>
                            </button>
                            <button class="transition-transform active:scale-90">
                                <i data-lucide="send" class="w-7 h-7 text-white"></i>
                            </button>
                        </div>
                        <button><i data-lucide="share-2" class="w-6 h-6 text-gray-400"></i></button>
                    </div>

                    <!-- Content -->
                    <div class="px-4">
                        <p class="font-bold text-sm mb-1">${post.likes}Î™ÖÏù¥ Ï¢ãÏïÑÌï©ÎãàÎã§</p>
                        <div class="text-sm text-gray-200 mb-2 whitespace-pre-line leading-relaxed">
                            <span class="font-bold mr-2">${post.user.name}</span>${formatContent(post.content)}
                        </div>
                        
                        ${commentsSection}
                        
                        <!-- Comment Input -->
                        <div class="flex items-center gap-2 mt-2">
                            <div class="w-6 h-6 rounded-full bg-gray-700 overflow-hidden">
                                <img src="${currentUser.avatar}" class="w-full h-full">
                            </div>
                            <div class="flex-1 relative">
                                <input 
                                    type="text" 
                                    placeholder="ÎåìÍ∏Ä Îã¨Í∏∞..." 
                                    class="w-full bg-transparent text-sm text-white placeholder-gray-500 focus:outline-none"
                                    onkeypress="if(event.key === 'Enter') handleAddComment(${post.id}, this)"
                                >
                            </div>
                        </div>
                        <p class="text-[10px] text-gray-600 mt-2 uppercase">${post.timestamp}</p>
                    </div>
                </article>
                `;
            }).join('');
            
            // Re-initialize icons for new elements
            lucide.createIcons();
        }

        // --- Interaction Handlers ---

        function handleLike(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                if (post.likedByMe) {
                    post.likes--;
                    post.likedByMe = false;
                } else {
                    post.likes++;
                    post.likedByMe = true;
                }
                renderFeed();
            }
        }

        function handleAddComment(postId, inputElement) {
            const text = inputElement.value.trim();
            if (!text) return;

            const post = posts.find(p => p.id === postId);
            if (post) {
                post.comments.push({
                    id: Date.now(),
                    user: currentUser.name,
                    text: text
                });
                renderFeed();
            }
        }

        // --- Upload Handlers ---

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onloadend = () => {
                    uploadData.image = reader.result;
                    
                    // UI ÏóÖÎç∞Ïù¥Ìä∏
                    document.getElementById('upload-preview-img').src = reader.result;
                    document.getElementById('upload-preview-container').classList.remove('hidden');
                    document.getElementById('upload-placeholder').classList.add('hidden');
                    
                    renderHeader(); // Í≥µÏú†ÌïòÍ∏∞ Î≤ÑÌäº ÌôúÏÑ±Ìôî
                };
                reader.readAsDataURL(file);
            }
        }

        function updatePreviewStats() {
            const dist = document.getElementById('input-distance').value;
            document.getElementById('preview-distance').innerText = dist || '0.00';
        }

        function handlePostSubmit() {
            if (!uploadData.image) return;

            const dist = document.getElementById('input-distance').value;
            const time = document.getElementById('input-time').value;
            const pace = document.getElementById('input-pace').value;
            const caption = document.getElementById('input-caption').value;

            const newPost = {
                id: Date.now(),
                user: currentUser,
                image: uploadData.image,
                stats: { distance: dist, pace: pace, time: time },
                content: caption,
                likes: 0,
                likedByMe: false,
                comments: [],
                timestamp: 'Î∞©Í∏à Ï†Ñ'
            };

            posts.unshift(newPost); // Add to top
            
            // Reset Upload Form
            uploadData.image = null;
            document.getElementById('file-input').value = '';
            document.getElementById('upload-preview-container').classList.add('hidden');
            document.getElementById('upload-placeholder').classList.remove('hidden');
            document.getElementById('input-caption').value = '';

            // Switch to feed
            switchTab('feed');
            renderFeed();
        }

    </script>
</body>
</html>