<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SETTINGS - POKE RUN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --volt: #ccff00;
            --dark: #111;
            --panel: #1a1a1a;
        }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #000; color: #fff; }
        .font-sport { font-family: 'Chakra Petch', sans-serif; }
        
        /* 토글 스위치 커스텀 */
        .toggle-checkbox:checked {
            right: 0;
            border-color: var(--volt);
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: var(--volt);
        }
        
        /* 스크롤바 숨김 */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <header class="flex items-center justify-between px-6 py-5 border-b border-gray-800 bg-black z-50">
        <button onclick="history.back()" class="text-white hover:text-[#ccff00] transition">
            <i data-lucide="arrow-left" class="w-8 h-8"></i>
        </button>
        <h1 class="text-2xl font-sport font-bold italic tracking-wider text-[#ccff00]">SYSTEM</h1>
        <div class="w-8"></div> </header>

    <main class="flex-1 overflow-y-auto no-scrollbar p-6 pb-24 space-y-8">

        <section>
            <h2 class="text-sm font-bold text-gray-500 mb-4 font-sport tracking-widest">TRAINER PROFILE</h2>
            <div class="bg-[#1a1a1a] rounded-2xl p-4 space-y-4">
                <div class="flex justify-between items-center border-b border-gray-800 pb-4">
                    <span class="font-bold text-lg">닉네임</span>
                    <input type="text" id="user-name" value="지우" class="bg-black text-[#ccff00] text-right font-bold rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-[#ccff00] w-32">
                </div>
                <div class="flex justify-between items-center">
                    <span class="font-bold text-lg">체중 (kg)</span>
                    <div class="flex items-center gap-2">
                        <button onclick="adjustWeight(-1)" class="w-8 h-8 rounded-full bg-gray-800 text-white flex items-center justify-center font-bold active:bg-gray-700">-</button>
                        <span id="weight-display" class="font-sport text-xl text-[#ccff00] font-bold w-12 text-center">70</span>
                        <button onclick="adjustWeight(1)" class="w-8 h-8 rounded-full bg-gray-800 text-white flex items-center justify-center font-bold active:bg-gray-700">+</button>
                    </div>
                </div>
                <p class="text-xs text-gray-500">* 칼로리 계산에 사용됩니다.</p>
            </div>
        </section>

        <section>
            <h2 class="text-sm font-bold text-gray-500 mb-4 font-sport tracking-widest">RUNNING CONFIG</h2>
            <div class="bg-[#1a1a1a] rounded-2xl p-4 space-y-1">
                
                <div class="flex justify-between items-center py-3">
                    <div>
                        <div class="font-bold text-lg">음성 코치</div>
                        <div class="text-xs text-gray-400">1km마다 페이스 알림</div>
                    </div>
                    <div class="relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in">
                        <input type="checkbox" name="toggle" id="voice-guide" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer transition-all duration-300 left-0 checked:left-6"/>
                        <label for="voice-guide" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-700 cursor-pointer"></label>
                    </div>
                </div>

                <div class="border-b border-gray-800"></div>

                <div class="flex justify-between items-center py-3">
                    <div>
                        <div class="font-bold text-lg">자동 일시정지</div>
                        <div class="text-xs text-gray-400">멈추면 기록 자동 중단</div>
                    </div>
                    <div class="relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in">
                        <input type="checkbox" name="toggle" id="auto-pause" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer transition-all duration-300 left-0 checked:left-6"/>
                        <label for="auto-pause" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-700 cursor-pointer"></label>
                    </div>
                </div>

                 <div class="border-b border-gray-800"></div>

                <div class="flex justify-between items-center py-3">
                    <span class="font-bold text-lg">카운트다운</span>
                    <select id="countdown-sec" class="bg-black text-white font-sport px-3 py-1 rounded border border-gray-700 focus:border-[#ccff00] outline-none">
                        <option value="0">OFF</option>
                        <option value="3" selected>3 SEC</option>
                        <option value="5">5 SEC</option>
                        <option value="10">10 SEC</option>
                    </select>
                </div>
            </div>
        </section>

        <section>
            <h2 class="text-sm font-bold text-gray-500 mb-4 font-sport tracking-widest">GAME & AUDIO</h2>
            <div class="bg-[#1a1a1a] rounded-2xl p-4 space-y-4">
                <div>
                    <div class="flex justify-between mb-2">
                        <span class="font-bold text-gray-300">BGM Volume</span>
                        <span id="bgm-val" class="font-sport text-[#ccff00]">50%</span>
                    </div>
                    <input type="range" min="0" max="100" value="50" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-[#ccff00]" oninput="updateVol('bgm', this.value)">
                </div>
                
                <div>
                    <div class="flex justify-between mb-2">
                        <span class="font-bold text-gray-300">SFX Volume</span>
                        <span id="sfx-val" class="font-sport text-[#ccff00]">80%</span>
                    </div>
                    <input type="range" min="0" max="100" value="80" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-[#ccff00]" oninput="updateVol('sfx', this.value)">
                </div>

                <div class="border-t border-gray-800 pt-3 flex justify-between items-center">
                    <div>
                        <div class="font-bold text-lg">진동 효과</div>
                        <div class="text-xs text-gray-400">이벤트 발생 시 진동</div>
                    </div>
                    <div class="relative inline-block w-12 mr-2">
                        <input type="checkbox" id="haptic" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer transition-all duration-300 left-0 checked:left-6"/>
                        <label for="haptic" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-700 cursor-pointer"></label>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2 class="text-sm font-bold text-red-500 mb-4 font-sport tracking-widest">DANGER ZONE</h2>
            <button onclick="resetData()" class="w-full py-4 border-2 border-red-900 bg-red-900/20 rounded-2xl text-red-500 font-bold flex items-center justify-center gap-2 hover:bg-red-900/40 transition">
                <i data-lucide="trash-2" class="w-5 h-5"></i>
                모든 게임 데이터 초기화
            </button>
            <p class="text-center text-xs text-gray-600 mt-2">포켓몬 도감 및 코인이 영구 삭제됩니다.</p>
        </section>

        <div class="text-center text-gray-700 text-xs font-sport mt-10">
            APP VER 1.0.0 (BETA)<br>
            POKEMON CLUB ULTIMATE
        </div>

    </main>

    <div class="fixed bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black via-black to-transparent z-50">
        <button onclick="saveSettings()" class="w-full bg-[#ccff00] text-black font-black italic text-xl py-4 rounded-full shadow-[0_0_20px_rgba(204,255,0,0.4)] hover:scale-[1.02] active:scale-95 transition-transform font-sport">
            SAVE SETTINGS
        </button>
    </div>

    <script>
        // 아이콘 렌더링
        lucide.createIcons();

        // === 1. 설정값 불러오기 (Load) ===
        const defaultSettings = {
            weight: 70,
            nickname: '지우',
            voiceGuide: false,
            autoPause: true,
            countdown: 3,
            bgmVol: 50,
            sfxVol: 80,
            haptic: true
        };

        let currentSettings = JSON.parse(localStorage.getItem('appSettings')) || defaultSettings;

        // UI에 값 적용
        document.getElementById('weight-display').innerText = currentSettings.weight;
        document.getElementById('user-name').value = currentSettings.nickname;
        document.getElementById('voice-guide').checked = currentSettings.voiceGuide;
        document.getElementById('auto-pause').checked = currentSettings.autoPause;
        document.getElementById('countdown-sec').value = currentSettings.countdown;
        document.getElementById('haptic').checked = currentSettings.haptic;
        
        // 볼륨 바 적용
        document.querySelector('input[oninput*="bgm"]').value = currentSettings.bgmVol;
        document.getElementById('bgm-val').innerText = currentSettings.bgmVol + '%';
        document.querySelector('input[oninput*="sfx"]').value = currentSettings.sfxVol;
        document.getElementById('sfx-val').innerText = currentSettings.sfxVol + '%';

        // === 2. 기능 함수들 ===
        
        function adjustWeight(amount) {
            let w = parseInt(document.getElementById('weight-display').innerText);
            w += amount;
            if(w < 30) w = 30; // 최소 무게 제한
            if(w > 200) w = 200;
            document.getElementById('weight-display').innerText = w;
        }

        function updateVol(type, val) {
            document.getElementById(`${type}-val`).innerText = val + '%';
        }

        function resetData() {
            if(confirm("정말로 초기화 하시겠습니까?\n모든 포켓몬과 코인이 사라집니다!")) {
                localStorage.clear(); // 로컬스토리지 전체 삭제
                alert("초기화 완료. 앱을 재시작합니다.");
                location.reload();
            }
        }

        // === 3. 저장하기 (Save) ===
        function saveSettings() {
            const newSettings = {
                weight: parseInt(document.getElementById('weight-display').innerText),
                nickname: document.getElementById('user-name').value,
                voiceGuide: document.getElementById('voice-guide').checked,
                autoPause: document.getElementById('auto-pause').checked,
                countdown: parseInt(document.getElementById('countdown-sec').value),
                bgmVol: parseInt(document.querySelector('input[oninput*="bgm"]').value),
                sfxVol: parseInt(document.querySelector('input[oninput*="sfx"]').value),
                haptic: document.getElementById('haptic').checked
            };

            localStorage.setItem('appSettings', JSON.stringify(newSettings));
            
            // 저장 완료 피드백 (간단한 토스트 메시지 느낌)
            const btn = document.querySelector('button[onclick="saveSettings()"]');
            const originalText = btn.innerText;
            btn.innerText = "SAVED!";
            btn.style.backgroundColor = "#fff";
            
            setTimeout(() => {
                btn.innerText = originalText;
                btn.style.backgroundColor = "#ccff00";
            }, 1000);
        }
    </script>
</body>
</html>